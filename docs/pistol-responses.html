<!doctype html>
<html>
    <head>
        <meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
        <title>Sex Pistol | Responses</title>
        <link rel="stylesheet" href="../assets/style.css" type="text/css" media="all">
    </head>
    <body class='typora-export'>
        <div id='write'  class=''>
            <h1>
                <a name="pistol--responses" class="md-header-anchor"></a>
                <span>Pistol | Responses</span>
            </h1>
            <p>
            <span>Pistol is the http server library, basicaly we can make Rest APIs, or Site server in simple way:</span>
            </p>
<pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="go"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="go"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">package</span><span class="cm-variable">main</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span><span class="cm-string">"github.com/Plankiton/SexPistol"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">func</span><span class="cm-variable">main</span>(){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;Sex.NewPistol() <span class="cm-number">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;<span class="cm-variable">Add</span>(<span class="cm-string">"/{name}"</span>,<span class="cm-keyword">func</span>(<span class="cm-variable">r</span><span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">Request</span>) <span class="cm-keyword">string</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="cm-keyword">return</span><span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">Fmt</span>(<span class="cm-string">"Hello, %s"</span>,<span class="cm-variable">r</span><span class="cm-number">.</span><span class="cm-variable">PathVars</span>[<span class="cm-string">"name"</span>]) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp}) <span class="cm-number">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;<span class="cm-variable">Run</span>() </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre>
        <p>
        <span>That code make a server for a custom &quot;hello world&quot;, basicaly we are taking an path variable and puting than on response, that is a string, but you can return another types on response:</span>
        </p>
        <h3>
            <a name="bytesstring-function-way" class="md-header-anchor"></a>
            <span>Bytes/String function way</span>
        </h3>
<pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="go"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="go"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x </span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">func</span>(<span class="cm-variable">r</span><span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">Request</span>) (<span class="cm-keyword">string</span>,<span class="cm-keyword">int</span>){</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;<span class="cm-keyword">return</span>[] <span class="cm-keyword">byte</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">Fmt</span>(<span class="cm-string">`{</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;<span class="cm-tab" role="presentation" cm-text="	"></span><span class="cm-tab" role="presentation" cm-text="	"></span><span class="cm-string">"Hello":"%s"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;<span class="cm-tab" role="presentation" cm-text="	"></span><span class="cm-string">}`</span>,<span class="cm-variable">r</span><span class="cm-number">.</span><span class="cm-variable">PathVars</span>[<span class="cm-string">"name"</span>]) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;),<span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">StatusOk</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">func</span>(<span class="cm-variable">r</span><span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">Request</span>) (<span class="cm-keyword">string</span>,<span class="cm-keyword">int</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;<span class="cm-keyword">return</span><span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">Fmt</span>(<span class="cm-string">`{</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;<span class="cm-tab" role="presentation" cm-text="	"></span><span class="cm-string">"Hello":"%s"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;<span class="cm-string">}`</span>,<span class="cm-variable">r</span><span class="cm-number">.</span><span class="cm-variable">PathVars</span>[<span class="cm-string">"name"</span>]),<span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">StatusOk</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 338px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre>
    <blockquote>
        <p>
        <span>Status code are opitional, if you want to return &quot;200&quot; (or StatusOk), is just hide the int on declaration of functions and second return value</span>
        </p>
    </blockquote>
    <p>&nbsp;</p>
    <h3>
        <a name="json-way" class="md-header-anchor"></a>
        <span>Json way</span>
    </h3>
    <blockquote>
        <p>
        <span>That type take lists, maps and structs into a json output</span>
        </p>
    </blockquote>
<pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="go" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="go"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">func</span>(<span class="cm-variable">r</span><span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">Request</span>) (<span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">Json</span>,<span class="cm-keyword">int</span>){</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;<span class="cm-keyword">return</span><span class="cm-keyword">map</span>[<span class="cm-keyword">string</span>] <span class="cm-keyword">string</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="cm-string">"Hello"</span>:<span class="cm-variable">r</span><span class="cm-number">.</span><span class="cm-variable">PathVars</span>[<span class="cm-string">"name"</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp},<span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">StatusOk</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Too works with structs,arrays and wath ever</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">type</span><span class="cm-variable">Res</span><span class="cm-keyword">struct</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;<span class="cm-variable">Hello</span><span class="cm-keyword">string</span><span class="cm-string">`json:"Hello"`</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">func</span>(<span class="cm-variable">r</span><span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">Request</span>) (<span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">Json</span>,<span class="cm-keyword">int</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;<span class="cm-variable">res</span>:<span class="cm-operator">=</span><span class="cm-variable">Res</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="cm-variable">Hello</span>:<span class="cm-variable">r</span><span class="cm-number">.</span><span class="cm-variable">PathVars</span>[<span class="cm-string">"name"</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;<span class="cm-keyword">return</span><span class="cm-variable">res</span>,<span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">StatusOk</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 442px;"></div><div class="CodeMirror-gutters" style="display: none; height: 442px;"></div></div></div></pre>
    <h3>
        <a name="custom-way" class="md-header-anchor"></a>
        <span>Custom way</span>
    </h3>
    <p>
    <span>And you can too make a custom response:</span>
    </p>
<pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="go"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="go"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">func</span>(<span class="cm-variable">r</span><span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">Request</span>) (<span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">Response</span>,<span class="cm-keyword">int</span>){</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;<span class="cm-variable">res</span>:<span class="cm-operator">=</span><span class="cm-variable">r</span><span class="cm-number">.</span><span class="cm-variable">MkResponse</span>() </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;<span class="cm-variable">res</span><span class="cm-number">.</span><span class="cm-variable">SetBody</span>(<span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">Jsonify</span>(<span class="cm-keyword">map</span>[<span class="cm-keyword">string</span>] <span class="cm-keyword">string</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="cm-string">"Hello"</span>:<span class="cm-variable">r</span><span class="cm-number">.</span><span class="cm-variable">PathVars</span>[<span class="cm-string">"name"</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp}))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;<span class="cm-keyword">return</span><span class="cm-variable">res</span>,<span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">StatusOk</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre>
    <h3>
        <a name="bullet-for-pistol" class="md-header-anchor"></a>
        <span>Bullet for pistol</span>
    </h3>
    <p>
    <span>We have a template for response in case of Rest APIs, it optional but are a way to make beautiful API returns:</span>
    </p>
    <blockquote>
        <p>
        <span>That template is for use on Json return way</span>
        </p>
    </blockquote>
<pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="go"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="go"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Sex</span><span class="cm-number">.</span><span class="cm-variable">Bullet</span>{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;<span class="cm-variable">Type</span>:<span class="cm-string">"Error|Success"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;<span class="cm-variable">Message</span>:<span class="cm-string">"Response description"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&nbsp;&nbsp;<span class="cm-variable">Data</span>:<span class="cm-string">"Response data"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre>
    <h1>
        <a name="" class="md-header-anchor"></a>
    </h1>
        </div>
    </body>
</html>
